<!DOCTYPE html>
<html style="height: 100%">
	<head>
		<meta charset="utf-8">
	</head>
	<body style="height: 100%; margin: 0">
		<div id="container" style="height: 100%"></div>
		<script type="text/javascript" src="echarts.min.js"></script>
		<script type="text/javascript" src="usa.js"></script>
		<script type="text/javascript" src="data.js"></script>
		<script type="text/javascript">
			
		var myChart = echarts.init(document.getElementById("container"));

		option = {
			timeline: {
				show : true,
				axisType: 'category',
				autoPlay: true,
				playInterval: 500,
				data: [
					1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,
					1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,
					2012,2013,2014
				],
				label: {
					formatter : function(s) {
						return (new Date(s)).getFullYear();
						}
				}
			 },
			
			options:[
				{
					title: {
							text: '美国谋杀案统计1980',
							subtext: 'Data from www.kaggle.com',
							left: 'middle'
						},
					tooltip: {
						trigger: 'item',
						showDelay: 0,
						transitionDuration: 0.2,
						formatter: function (params) {
							var value = (params.value + '').split('.');
							value = value[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g, '$1,');
							return params.seriesName + '<br/>' + params.name + ': ' + value;
						}
					},
					visualMap: {
						left: 'right',
						min: 0,
						max: 3000,
						inRange: {
							color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
						},
						text:['High','Low'],           // 文本，默认为数值文本
						calculable: true
					},
					toolbox: {
						show: true,
						//orient: 'vertical',
						left: 'left',
						top: 'top',
						feature: {
							dataView: {readOnly: false},
							restore: {},
							saveAsImage: {}
						}
					},
					series: [
							{
								name: '美国谋杀案统计',
								type: 'map',
								roam: true,
								map: 'usa',
								itemStyle:{
									emphasis:{label:{show:true}}
								},
								// 文本位置修正
								textFixed: {
									Alaska: [20, -20]
								},
								data:dataMap.OV['1980']
							}
					]
				},
								{
					title: {
							text: '美国谋杀案统计1981'
					},
					series: [
						{	
							data:dataMap.OV[1981]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1982'
					},
					series: [
						{	
							data:dataMap.OV[1982]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1983'
					},
					series: [
						{	
							data:dataMap.OV[1983]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1984'
					},
					series: [
						{	
							data:dataMap.OV[1984]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1985'
					},
					series: [
						{	
							data:dataMap.OV[1985]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1986'
					},
					series: [
						{	
							data:dataMap.OV[1986]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1987'
					},
					series: [
						{	
							data:dataMap.OV[1987]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1988'
					},
					series: [
						{	
							data:dataMap.OV[1988]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1989'
					},
					series: [
						{	
							data:dataMap.OV[1989]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1990'
					},
					series: [
						{	
							data:dataMap.OV[1990]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1991'
					},
					series: [
						{	
							data:dataMap.OV[1991]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1992'
					},
					series: [
						{	
							data:dataMap.OV[1992]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1993'
					},
					series: [
						{	
							data:dataMap.OV[1993]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1994'
					},
					series: [
						{	
							data:dataMap.OV[1994]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1995'
					},
					series: [
						{	
							data:dataMap.OV[1995]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1996'
					},
					series: [
						{	
							data:dataMap.OV[1996]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1997'
					},
					series: [
						{	
							data:dataMap.OV[1997]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1998'
					},
					series: [
						{	
							data:dataMap.OV[1998]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计1999'
					},
					series: [
						{	
							data:dataMap.OV[1999]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2000'
					},
					series: [
						{	
							data:dataMap.OV[2000]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2001'
					},
					series: [
						{	
							data:dataMap.OV[2001]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2002'
					},
					series: [
						{	
							data:dataMap.OV[2002]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2003'
					},
					series: [
						{	
							data:dataMap.OV[2003]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2004'
					},
					series: [
						{	
							data:dataMap.OV[2004]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2005'
					},
					series: [
						{	
							data:dataMap.OV[2005]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2006'
					},
					series: [
						{	
							data:dataMap.OV[2006]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2007'
					},
					series: [
						{	
							data:dataMap.OV[2007]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2008'
					},
					series: [
						{	
							data:dataMap.OV[2008]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2009'
					},
					series: [
						{	
							data:dataMap.OV[2009]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2010'
					},
					series: [
						{	
							data:dataMap.OV[2010]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2011'
					},
					series: [
						{	
							data:dataMap.OV[2011]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2012'
					},
					series: [
						{	
							data:dataMap.OV[2012]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2013'
					},
					series: [
						{	
							data:dataMap.OV[2013]
						}
					]
				},
				{
					title: {
							text: '美国谋杀案统计2014'
					},
					series: [
						{	
							data:dataMap.OV[2014]
						}
					]
				}
			]
		};
		
		myChart.setOption(option, true);
		myChart.on('click',function test(param)
		{
			var regPat=new RegExp("\\d");
			if(!regPat.test(param.name))
				window.location.href="state.html?id="+param.name;
		});
       </script>
   </body>
</html>